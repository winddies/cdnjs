import*as tslib_1 from"tslib";import{Location}from"@angular/common";import{Injectable}from"@angular/core";import{Angulartics2}from"angulartics2";import*as i0 from"@angular/core";import*as i1 from"angulartics2";import*as i2 from"@angular/common";let Angulartics2AdobeAnalytics=class{constructor(t,e){this.angulartics2=t,this.location=e,this.angulartics2.setUserProperties.subscribe(t=>this.setUserProperties(t))}startTracking(){this.angulartics2.pageTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(t=>this.pageTrack(t.path)),this.angulartics2.eventTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(t=>this.eventTrack(t.action,t.properties))}pageTrack(t){"undefined"!=typeof s&&s&&(s.clearVars(),s.t({pageName:t}))}eventTrack(t,e){if(e||(e=e||{}),"undefined"!=typeof s&&s&&("object"==typeof e&&this.setUserProperties(e),t)){const a=e.linkName?e.linkName:t,i=!!e.disableDelay||this;e.action&&(t=e.action),this.setPageName(),"DOWNLOAD"===t.toUpperCase()?s.tl(i,"d",a):"EXIT"===t.toUpperCase()?s.tl(i,"e",a):s.tl(i,"o",a)}}setPageName(){const t=this.location.path(!0),e=t.indexOf("#");e>0&&e<t.length?s.pageName=t.substring(e+1):s.pageName=t}setUserProperties(t){if("undefined"!=typeof s&&s&&"object"==typeof t)for(const e in t)t.hasOwnProperty(e)&&(s[e]=t[e])}};Angulartics2AdobeAnalytics.ngInjectableDef=i0.defineInjectable({factory:function(){return new Angulartics2AdobeAnalytics(i0.inject(i1.Angulartics2),i0.inject(i2.Location))},token:Angulartics2AdobeAnalytics,providedIn:"root"}),Angulartics2AdobeAnalytics=tslib_1.__decorate([Injectable({providedIn:"root"}),tslib_1.__metadata("design:paramtypes",[Angulartics2,Location])],Angulartics2AdobeAnalytics);export{Angulartics2AdobeAnalytics};