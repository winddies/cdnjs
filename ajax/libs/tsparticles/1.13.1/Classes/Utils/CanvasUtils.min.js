"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ColorUtils_1=require("./ColorUtils"),CanvasUtils=function(){function o(){}return o.paintBase=function(o,t,l){o.save(),o.fillStyle=null!=l?l:"rgba(0,0,0,0)",o.fillRect(0,0,t.width,t.height),o.restore()},o.clear=function(o,t){o.clearRect(0,0,t.width,t.height)},o.drawPolygonMask=function(o,t,l){var r="string"==typeof l.color?ColorUtils_1.ColorUtils.stringToRgb(l.color):ColorUtils_1.ColorUtils.colorToRgb(l.color);if(r){o.save(),o.beginPath(),o.moveTo(t[0].x,t[0].y);for(var e=1;e<t.length;e++)o.lineTo(t[e].x,t[e].y);o.closePath(),o.strokeStyle=ColorUtils_1.ColorUtils.getStyleFromColor(r),o.lineWidth=l.width,o.stroke(),o.restore()}},o.drawPolygonMaskPath=function(o,t,l,r){o.save(),o.translate(r.x,r.y);var e="string"==typeof l.color?ColorUtils_1.ColorUtils.stringToRgb(l.color):ColorUtils_1.ColorUtils.colorToRgb(l.color);e&&(o.strokeStyle=ColorUtils_1.ColorUtils.getStyleFromColor(e,l.opacity),o.lineWidth=l.width,o.stroke(t)),o.restore()},o.drawAbsorber=function(o,t){o.save(),o.translate(t.position.x,t.position.y),o.beginPath(),o.arc(0,0,t.size,0,2*Math.PI,!1),o.closePath(),o.fillStyle=ColorUtils_1.ColorUtils.getStyleFromColor(t.color,t.opacity),o.fill(),o.restore()},o.drawLineLinked=function(o,t,l,r,e,i,s,a){o.save(),o.lineWidth=t,o.beginPath(),o.moveTo(l.x,l.y),o.lineTo(r.x,r.y),o.closePath(),e&&(o.globalCompositeOperation="destination-out"),i&&(o.strokeStyle=ColorUtils_1.ColorUtils.getStyleFromColor(i,s));var n="string"==typeof a.color?ColorUtils_1.ColorUtils.stringToRgb(a.color):ColorUtils_1.ColorUtils.colorToRgb(a.color);a.enable&&n&&(o.shadowBlur=a.blur,o.shadowColor=ColorUtils_1.ColorUtils.getStyleFromColor(n)),o.stroke(),o.restore()},o.drawConnectLine=function(o,t,l,r,e){o.save(),o.beginPath(),o.moveTo(r.x,r.y),o.lineTo(e.x,e.y),o.closePath(),o.lineWidth=t,o.strokeStyle=l,o.stroke(),o.restore()},o.gradient=function(o,t,l,r){var e=Math.floor(l.size.value/t.size.value);if(t.color&&l.color){var i=t.position,s=l.position,a=ColorUtils_1.ColorUtils.mix(t.color,l.color,t.size.value,l.size.value),n=o.createLinearGradient(i.x,i.y,s.x,s.y);return n.addColorStop(0,ColorUtils_1.ColorUtils.getStyleFromColor(t.color,r)),n.addColorStop(1<e?1:e,ColorUtils_1.ColorUtils.getStyleFromColor(a,r)),n.addColorStop(1,ColorUtils_1.ColorUtils.getStyleFromColor(l.color,r)),n}},o.drawGrabLine=function(o,t,l,r,e,i){o.save(),o.beginPath(),o.moveTo(l.x,l.y),o.lineTo(r.x,r.y),o.closePath(),o.strokeStyle=ColorUtils_1.ColorUtils.getStyleFromColor(e,i),o.lineWidth=t,o.stroke(),o.restore()},o.drawParticle=function(o,t,l,r,e,i,s){var a={x:t.position.x+t.offset.x,y:t.position.y+t.offset.y};o.save(),o.translate(a.x,a.y),o.beginPath();var n=t.shadowColor;s.enable&&n&&(o.shadowBlur=s.blur,o.shadowColor=ColorUtils_1.ColorUtils.getStyleFromColor(n),o.shadowOffsetX=s.offset.x,o.shadowOffsetY=s.offset.y),o.fillStyle=l,0!==t.angle&&o.rotate(t.angle*Math.PI/180),r&&(o.globalCompositeOperation="destination-out");var C=t.stroke;0<C.width&&t.strokeColor&&(o.strokeStyle=ColorUtils_1.ColorUtils.getStyleFromColor(t.strokeColor,t.stroke.opacity),o.lineWidth=C.width),this.drawShape(o,t,e,i),t.close&&o.closePath(),0<C.width&&t.strokeColor&&o.stroke(),t.fill&&o.fill(),o.restore()},o.addShapeDrawer=function(o,t){this.drawers[o]||(this.drawers[o]=t)},o.drawShape=function(o,t,l,r){if(t.shape){var e=this.drawers[t.shape];e&&e.draw(o,t,l,r)}},o.drawers={},o}();exports.CanvasUtils=CanvasUtils;